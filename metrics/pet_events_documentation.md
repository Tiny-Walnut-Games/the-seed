# Pet Events Log Documentation

This document describes the pet events logging system that tracks pet evolution, achievements, and concept seed events within the Living Dev Agent ecosystem.

## Log File Location

Pet events are logged to: `metrics/pet_events_actual.log`

## Log Format

Each log entry follows this JSON structure:

```json
{
  "timestamp": "2025-01-15T10:30:45.123Z",
  "event_type": "CONCEPT_SEED",
  "pet_id": "550e8400-e29b-41d4-a716-446655440000", 
  "data": {
    "charter_id": "IDEA-2025-01-15-StreamlineValidation",
    "charter_title": "Streamline TLDL Validation Pipeline",
    "seed_type": "optimization",
    "charter_path": "docs/charters/IDEA-2025-01-15-StreamlineValidation.md",
    "synergy_score": 85,
    "integrity_boost_potential": "high"
  }
}
```

## Event Types and Examples

### CONCEPT_SEED Events

Triggered when a triaged idea charter generates a concept seed for a pet:

```json
{
  "timestamp": "2025-01-15T14:22:30.456Z",
  "event_type": "CONCEPT_SEED",
  "pet_id": "archivist-001",
  "data": {
    "charter_id": "IDEA-2025-01-15-IdeaCharterSystem", 
    "charter_title": "Unified Idea Charter System Implementation",
    "seed_type": "integration",
    "charter_path": "docs/charters/IDEA-2025-01-15-IdeaCharterSystem.md",
    "synergy_score": 95,
    "integrity_boost_potential": "very_high",
    "implementation_status": "in_progress"
  }
}
```

### IMPLEMENTATION_SUCCESS Events

When an idea charter is successfully implemented:

```json
{
  "timestamp": "2025-01-20T09:15:22.789Z",
  "event_type": "IMPLEMENTATION_SUCCESS",
  "pet_id": "innovation-sprite-002",
  "data": {
    "charter_id": "IDEA-2025-01-15-IdeaCharterSystem",
    "implementation_type": "full_integration",
    "success_metrics": {
      "charter_template_created": true,
      "validator_implemented": true,
      "workflow_integration": true,
      "documentation_updated": true
    },
    "duration_days": 5,
    "synergy_achieved": 92,
    "integrity_boost_realized": "high"
  }
}
```

### STREAK_HEALTHY Events

When idea implementation streaks meet healthy thresholds:

```json
{
  "timestamp": "2025-01-15T16:45:10.234Z",
  "event_type": "STREAK_HEALTHY",
  "pet_id": "archivist-001",
  "data": {
    "evaluation_window": "14_days",
    "implementation_ratio": 0.42,
    "total_charters": 12,
    "implementations_completed": 5,
    "threshold_met": "healthy",
    "xp_bonus_awarded": 25,
    "special_ability_unlocked": "enhanced_lore_preservation"
  }
}
```

### EVOLUTION Events

When pets evolve based on accumulated concept seeds and achievements:

```json
{
  "timestamp": "2025-01-25T11:30:45.567Z",
  "event_type": "EVOLUTION",
  "pet_id": "archivist-001",
  "data": {
    "evolution_trigger": "concept_seed_milestone",
    "previous_form": "ARCHIVIST_FAMILIAR",
    "new_form": "CHRONICLE_KEEPER_ASSISTANT",
    "evolution_conditions_met": {
      "concept_seeds_collected": 10,
      "idea_implementation_rate": 0.35,
      "documentation_quality_score": 88
    },
    "new_abilities": [
      "automated_lore_generation",
      "cross_charter_pattern_recognition",
      "predictive_implementation_analysis"
    ]
  }
}
```

## Integration with Chronicle Keeper

Certain pet events automatically trigger Chronicle Keeper lore generation:

### Auto-Lore Triggers

1. **High-Impact Concept Seeds**: When `synergy_score >= 90`
2. **Successful Implementations**: When `integrity_boost_realized` is "high" or "very_high"  
3. **Pet Evolution Events**: All evolution events generate chronicle entries
4. **Streak Milestones**: Major streak achievements or failures

### Chronicle Keeper Event Format

When pet events trigger Chronicle Keeper, they generate TLDL entries with this pattern:

```markdown
# 🧠📜 TLDL: Pet Evolution - [Pet Name] Achieved [Milestone]

**Generated by**: Chronicle Keeper (Pet Events Integration)
**Pet ID**: [pet_id]
**Event Type**: [event_type]
**Context**: [Detailed context from pet event data]

## 🎯 Objective
Document significant pet system milestone for lore preservation...

## 🔍 Discovery  
Pet evolution patterns reveal...

## ⚡ Actions Taken
1. Pet achieved [specific milestone]
2. [Additional event details]...
```

## Streak Monitoring Integration

The pet events system integrates with streak monitoring to track idea charter implementation health:

### Calculation Method

```
implementation_ratio = implementations_completed / total_charters_created
```

Evaluated over configurable time windows:
- **Short-term**: 14 days
- **Medium-term**: 30 days  
- **Long-term**: 90 days

### Threshold Actions

| Ratio | Status | Pet Event | Actions |
|-------|--------|-----------|---------|
| ≥ 0.30 | Healthy | STREAK_HEALTHY | XP bonus, ability unlock |
| 0.15-0.29 | Concerning | STREAK_CONCERNING | Warning notification |
| < 0.15 | Critical | STREAK_CRITICAL | Alert, mandatory audit |

## Tools and Scripts

### Log Analysis
```bash
# View recent concept seed events
grep "CONCEPT_SEED" metrics/pet_events.log | tail -10

# Calculate current streak ratio
python3 scripts/pet-analytics/streak-calculator.py --window=14

# Generate pet evolution report
python3 scripts/pet-analytics/evolution-report.py --pet-id=archivist-001
```

### Event Generation
```bash
# Manually trigger concept seed event (for testing)
python3 scripts/pet-events/generate-concept-seed.py \
  --charter-id=IDEA-2025-01-15-TestIdea \
  --pet-id=archivist-001 \
  --seed-type=optimization

# Record implementation success
python3 scripts/pet-events/record-implementation.py \
  --charter-id=IDEA-2025-01-15-TestIdea \
  --success-metrics='{"validation_passed":true}'
```

## Log Rotation and Maintenance

### Rotation Policy
- **Daily logs**: Kept for 90 days
- **Weekly aggregates**: Kept for 1 year
- **Monthly summaries**: Kept indefinitely

### Backup Strategy
- Real-time replication to secondary storage
- Weekly compressed archives
- Integration with repository backup systems

## Validation and Quality Assurance

### Log Entry Validation
All pet events are validated against the schema before logging:

```python
from pets.validators import validate_pet_event

event_data = {
    "timestamp": "2025-01-15T10:30:45.123Z",
    "event_type": "CONCEPT_SEED", 
    "pet_id": "archivist-001",
    "data": {...}
}

if validate_pet_event(event_data):
    log_pet_event(event_data)
else:
    raise ValidationError("Invalid pet event data")
```

### Monitoring and Alerts
- **Malformed entries**: Immediate alert to development team
- **Missing required fields**: Warning in validation logs
- **Unexpected event types**: Flag for schema review

## Privacy and Security

### Data Protection
- Pet IDs are anonymized UUIDs
- No personally identifiable information in logs
- Secure access controls on log files

### Audit Trail
- All log modifications tracked
- Immutable append-only logging
- Cryptographic integrity verification

---

*This pet events logging system is part of Jerry's legendary Living Dev Agent ecosystem.* 🧙‍♂️⚡📜

*Designed to transform creative idea tracking into gamified pet evolution while maintaining comprehensive audit trails and lore preservation.*{"timestamp": "2025-09-02T03:14:57.481092Z", "event_type": "STREAK_CRITICAL", "pet_id": "archivist-streak-monitor-001", "data": {"evaluation_window": 14, "implementation_ratio": 0, "total_charters": 0, "implementations_completed": 0, "threshold_met": "critical", "streak_status": "critical", "analysis_date": "2025-09-02T03:14:36.324209", "alert_generated": true, "mandatory_audit_triggered": true, "stalled_charters": []}}
